<!-- start with instruction - go to info sheet (cnsnt.html)-->
<!DOCTYPE html>

<meta charset="utf-8">

<head>

<title>Explainable Machine Learning (XAI)</title>
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />
  <link rel="stylesheet" href="./benchmark/styles/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="./benchmark/scripts/workers.js"></script>
</head>


<body>

</br>
  <!-- <div id="nextbutton3"  href="./exptxt.html" > <button onclick="location.reload();location.href='./cnsnt.html'">Continue</button> </div> -->
  <div id="nextbutton5"> <button onclick=read_radio() >Continue</button> </div>   

  <div id="formDiv">
    
    
    <div id="cnsnttextbox">
        <b>
          <h1> Pet Recognition AI </h1>
        </br>
        </br>
        </br>
        <p> We are building an AI system to recognize <u> pets in images from social media </u> to esmitate pet populations in cities </p>
        <p> Our AI system is trained to <u> detect cats and dogs</u> in images. </p>
        <p> We need your help to <u> evaluate the "goodness" of our AI </u> by reviewing it's output for 15 images. </p>
        <p> Our <u> AI describes where it found a pet </u> by highlighting areas of the image. </p>
        </br>
        </br>
        </br>
        </br>
        <hr>
        </br>
        <h1> Instructions: </h1>
        </br>
        <h2> Review our AI's Explanations:<br> <br> Your main task is to <mark><u> review and rate the heatmaps</u></mark> which explain what parts the AI used to make it's decision: </h2>
        <p>The areas in red were the most important for identifying the pet whereas the areas in blue have little significance.</p>
        </br>
        <img  id= test_img src="http://people.tamu.edu/~sina.mohseni/data/instructions/heatmap.PNG" width="200">
        </br>
        </br>
        </br>
        <hr>
        </br>
        <h3> 1. Rate AI explanations for each image: </h3>
        <br>
        <ul>
          <li>Is the correct area selected?</li>
          <li>Does it match your expectations?</li>
          <li>Would you use the same areas to make your desicion?</li> <!-- todo: this is similar to the one above...-->
        </ul>

        </br>
        <img  id= test_img src="http://people.tamu.edu/~sina.mohseni/data/instructions/interface-1.PNG" width="400">
        </br>
        </br>

        </br>
        <hr>
        </br>

          <h3> 2. Click [Next Image] to Contiune (total of 15 images): </h3>
          </br>
          <img  id= test_img src="http://people.tamu.edu/~sina.mohseni/data/instructions/interface-2.PNG" width="400">
          </br>
          </br>

        </br>
        <hr>
        </br>

        <h3>  3. After 15 images, your HIT code is displayed, you must <mark>copy and paste</mark> this in the mechanical turk page for credit: </h3>
      </br>
          <img  id= test_img src="http://people.tamu.edu/~sina.mohseni/data/instructions/interface-3.PNG" width="400">
        </br>
        </br>
      </b>
    </div>
  </div>

  <div id="nextbutton4"> <button onclick=read_radio() >Continue</button> </div>   

  <script type="text/javascript"> 

    var user_task = "ImageRating"

    function getParameterByName(name, url) {
      if (!url) url = window.location.href;
      name = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
          results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    function read_radio(){
      // var radios = document.getElementsByName('category');
      
      // for (var i = 0, length = radios.length; i < length; i++){
      //    if (radios[i].checked){
      //     user_task = radios[i].value
      //     break;
      //    }
      // }

      // user_task: 1- task name
      //              2- dataset key
    //If a key is not entered in the URL, then generate a random key 0-4 inclusive
    function checkKey(k){
      console.log(k)
      if (k === null){
        return Math.floor(Math.random()*4)
      } else{
        return k
      }
    }

      const urlParams = new URLSearchParams(window.location.search);  
      const key = checkKey(urlParams.get('key'));
      user_task = "ImageRating"  

      setCookie("user_selection", [user_task,key])
      location.href='./benchmark/cnsnt.html'
    }
    
    function setCookie(cname, cvalue) {
      document.cookie = cname + "=" + cvalue + ";path=/";
    }



  </script>
  </br>
  
  </br>  

</body>
</html>
